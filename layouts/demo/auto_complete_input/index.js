import{SvelteComponent as t,append as e,attr as l,binding_callbacks as n,create_custom_element as s,destroy_block as i,detach as o,element as r,empty as d,ensure_array_like as u,flush as a,init as c,insert as h,listen as p,noop as $,not_equal as b,run_all as f,set_custom_element_data as m,set_data as v,set_input_value as y,space as x,src_url_equal as g,text as w,update_keyed_each as k}from"svelte/internal";import"svelte/internal/disclose-version";import"../--/lib/stylesheet_link.js";import A from"./lib/debounce.js";function M(t,e,l){const n=t.slice();return n[26]=e[l],n}function N(t){let e,l;function n(t,l){return 1&l&&(e=null),t[4].length>0?D:(null==e&&(e=!!t[0]?.trim()),e?j:void 0)}let s=n(t,-1),i=s&&s(t);return{c(){i&&i.c(),l=d()},m(t,e){i&&i.m(t,e),h(t,l,e)},p(t,e){s===(s=n(t,e))&&i?i.p(t,e):(i&&i.d(1),i=s&&s(t),i&&(i.c(),i.m(l.parentNode,l)))},d(t){t&&o(l),i&&i.d(t)}}}function j(t){let n,s,i,d;return{c(){n=r("button"),s=w(t[1]),l(n,"class","add"),l(n,"title",t[2])},m(l,o){h(l,n,o),e(n,s),t[21](n),i||(d=p(n,"click",t[9]),i=!0)},p(t,e){2&e&&v(s,t[1]),4&e&&l(n,"title",t[2])},d(e){e&&o(n),t[21](null),i=!1,d()}}}function D(t){let e,n,s,d=[],a=new Map,c=u(t[4]);const $=t=>q(t[26]);for(let e=0;e<c.length;e+=1){let l=M(t,c,e),n=$(l);a.set(n,d[e]=S(n,l))}return{c(){e=r("ul");for(let t=0;t<d.length;t+=1)d[t].c();l(e,"role","listbox"),l(e,"tabindex","0")},m(l,i){h(l,e,i);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(e,null);t[20](e),n||(s=p(e,"keydown",t[11]),n=!0)},p(t,l){1041&l&&(c=u(t[4]),d=k(d,l,$,1,t,c,a,e,i,S,null,M))},d(l){l&&o(e);for(let t=0;t<d.length;t+=1)d[t].d();t[20](null),n=!1,s()}}}function S(t,n){let s,i,d,u,a,c,$,b,f=C(n[26])+"";function m(){return n[19](n[26])}return{key:t,first:null,c(){s=r("li"),i=r("button"),d=w(f),u=x(),l(s,"role","option"),l(s,"title",a=C(n[26])),l(s,"aria-selected",c=E(n[26],n[0])),this.first=s},m(t,l){h(t,s,l),e(s,i),e(i,d),e(s,u),$||(b=p(i,"click",m),$=!0)},p(t,e){n=t,16&e&&f!==(f=C(n[26])+"")&&v(d,f),16&e&&a!==(a=C(n[26]))&&l(s,"title",a),17&e&&c!==(c=E(n[26],n[0]))&&l(s,"aria-selected",c)},d(t){t&&o(s),$=!1,b()}}}function U(t){let e,n,s,i,u,a,c,b,v=t[4]&&N(t);return{c(){e=r("stylesheet-link"),s=x(),i=r("input"),u=x(),v&&v.c(),a=d(),g(e.src,n=t[7])||m(e,"src",n),l(i,"type","text"),l(i,"placeholder",t[3])},m(l,n){h(l,e,n),h(l,s,n),h(l,i,n),y(i,t[0]),h(l,u,n),v&&v.m(l,n),h(l,a,n),c||(b=[p(i,"input",t[18]),p(i,"keydown",t[11]),p(i,"input",t[8]),p(i,"focus",t[12])],c=!0)},p(t,[s]){128&s&&!g(e.src,n=t[7])&&m(e,"src",n),8&s&&l(i,"placeholder",t[3]),1&s&&i.value!==t[0]&&y(i,t[0]),t[4]?v?v.p(t,s):(v=N(t),v.c(),v.m(a.parentNode,a)):v&&(v.d(1),v=null)},i:$,o:$,d(t){t&&(o(e),o(s),o(i),o(u),o(a)),v&&v.d(t),c=!1,f(b)}}}function q(t){return t.value||t}function C(t){return t.label||t}function E(t,e){return q(t)===e||void 0}function P(t,e,l){let s,i,o,r,{stylesheet:d="./styles/index.css"}=e,{addlabel:u="add"}=e,{accessibleaddlabel:a=u}=e,{placeholder:c}=e,{options:h}=e,{oninput:p}=e,{threshold:$}=e,{value:b}=e,{onadd:f}=e;const m={value:0};function v({target:{value:t}}){p?.(t.trim())}const y=$?A(v,$):v;function x(t){l(0,b=q(t))}function g(){m.value=0}function w(t){return r.querySelector(`:scope > li:nth-child(${t}) > button`)}return t.$$set=t=>{"stylesheet"in t&&l(13,d=t.stylesheet),"addlabel"in t&&l(1,u=t.addlabel),"accessibleaddlabel"in t&&l(2,a=t.accessibleaddlabel),"placeholder"in t&&l(3,c=t.placeholder),"options"in t&&l(4,h=t.options),"oninput"in t&&l(14,p=t.oninput),"threshold"in t&&l(15,$=t.threshold),"value"in t&&l(0,b=t.value),"onadd"in t&&l(16,f=t.onadd)},t.$$.update=()=>{8192&t.$$.dirty&&l(7,s=import.meta.resolve(d)),32&t.$$.dirty&&l(17,i=o?window.getComputedStyle(o).width:"0"),131104&t.$$.dirty&&o?.parentNode.host.style.setProperty("--add-btn-width",i),16&t.$$.dirty&&g()},[b,u,a,c,h,o,r,s,y,function(){f?.(b.trim())},x,function({key:t}){if(!["ArrowDown","ArrowUp"].includes(t)||!r)return;const e=m.value;if("ArrowDown"===t&&(m.value=Math.min(e+1,h?.length||0)),"ArrowUp"===t&&(m.value=Math.max(e-1,0)),m.value>0&&m.value!==e){!function(t){const e=w(t);e?.setAttribute("tabindex",0),e?.focus()}(m.value);const t=w(e);t?.blur(),t?.removeAttribute("tabindex")}},g,d,p,$,f,i,function(){b=this.value,l(0,b)},t=>x(t),function(t){n[t?"unshift":"push"]((()=>{r=t,l(6,r)}))},function(t){n[t?"unshift":"push"]((()=>{o=t,l(5,o)}))}]}class _ extends t{constructor(t){super(),c(this,t,P,U,b,{stylesheet:13,addlabel:1,accessibleaddlabel:2,placeholder:3,options:4,oninput:14,threshold:15,value:0,onadd:16})}get stylesheet(){return this.$$.ctx[13]}set stylesheet(t){this.$$set({stylesheet:t}),a()}get addlabel(){return this.$$.ctx[1]}set addlabel(t){this.$$set({addlabel:t}),a()}get accessibleaddlabel(){return this.$$.ctx[2]}set accessibleaddlabel(t){this.$$set({accessibleaddlabel:t}),a()}get placeholder(){return this.$$.ctx[3]}set placeholder(t){this.$$set({placeholder:t}),a()}get options(){return this.$$.ctx[4]}set options(t){this.$$set({options:t}),a()}get oninput(){return this.$$.ctx[14]}set oninput(t){this.$$set({oninput:t}),a()}get threshold(){return this.$$.ctx[15]}set threshold(t){this.$$set({threshold:t}),a()}get value(){return this.$$.ctx[0]}set value(t){this.$$set({value:t}),a()}get onadd(){return this.$$.ctx[16]}set onadd(t){this.$$set({onadd:t}),a()}}customElements.define("auto-complete-input",s(_,{stylesheet:{},addlabel:{},accessibleaddlabel:{},placeholder:{},options:{},oninput:{},threshold:{},value:{},onadd:{}},[],[],!0));export default _;